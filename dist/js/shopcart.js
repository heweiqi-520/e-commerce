"use strict";$(function(){$.get("./../php/showlist.php",function(n){var s=JSON.parse(n);if(0!=s.code){var e,i,p,l=s.data;$.each(l,function(n,s){p=l[n].product_id;var t=l[n].product_name,a=l[n].product_img;i=l[n].product_price,e=l[n].product_num;var c='<div class="sc_size" id="'.concat(p,'">\n        \x3c!-- 商品门店 --\x3e\n        <div class="sc_details">\n            <span class="sd1">\n                <input type="checkbox" name="" id="">自营\n            </span>\n            <span class="sd2">运费￥6.00，再买￥34.20 (10kg以内)免邮</span>\n            <span class="sd3">立刻凑单</span>\n        </div>\n         \x3c!-- 购买数量 --\x3e\n        <div class="sc_num">\n            <ul>\n                <li class="li_up">\n                    <span class="sn1">\n                        <input type="checkbox" name="" id="">\n                        <i>换购</i>\n                        指定商品购买1件可优惠换购热销商品\n                    </span>|\n                    <span class="sn2">\n                        已购满1件,可优惠换购\n                        <i>换购商品</i>\n                    </span>\n                </li>\n                <li class="li_down">\n                    <span class="sm1">\n                        <input type="checkbox" name="" id="">\n                        <a href=""><img src="').concat(a,'" alt=""></a>\n                    </span>\n                    <span class="sm2">\n                        <a href="">').concat(t,"</a>\n                        <i>7</i><em>").concat(t,'</em>\n                    </span>\n                    <span class="sm3">').concat(i,'</span>\n                    <span class="sm4">\n                        <button class="btn1" type="cut">-</button>\n                        <input type="text" name="" id="sc_num" value="').concat(e,'">\n                        <button class="btn2" type="add">+</button>\n                    </span>\n                    <span class="sm5">\n                        64.80\n                    </span>\n                    <span class="sm6">\n                        <a href="" class="sc_del">删除</a>\n                    </span>\n                </li>\n            </ul>\n        </div>\n        \x3c!-- 总价格 --\x3e\n        <div class="sc_totalval">\n            <span class="sl1">\n                商品总价：<i>￥<em class="p_tatol"></em></i>\n            </span>\n        </div>\n    </div>');$(".sc_checked").after(c),$("#sc_num").each(function(){console.log($(this)),$(this).change(function(){var n=$(this).val(),s=$(this).parents(".sc_size").attr("id");console.log(s),$.get("./../php/change.php?id=1&scnum="+n,function(n){d()})})})}),$sc_del=$(".sc_del"),$sc_del.click(function(){var n=$(this).parents(".sc_size").attr("id");console.log(n),$.get("./../php/delwq.php?id="+n,function(n){n.code&&console.log("删除陈功")}),d()}),$cutbtn=$(".btn1"),$addbtn=$(".btn2"),$cuttype=$(".btn1").attr("type"),$addtype=$(".btn2").attr("type"),$cutbtn.click(function(){var n=$(this).parents(".sc_size").attr("id"),s=$(this).next(),t=Number($(this).next().val());$.get("./../php/updatewq.php?id="+n+"&type="+$cuttype,function(n){JSON.parse(n).code}),s.val(t-1),d()}),$addbtn.click(function(){var n=$(this).parents(".sc_size").attr("id"),s=$(this).prev(),t=Number($(this).prev().val());$.get("./../php/updatewq.php?id="+n+"&type="+$addtype,function(n){JSON.parse(n).code}),console.log(t),s.val(t+1),d()}),d()}else alert("购物车空空如也");function d(){var e=0;$(".sc_size").each(function(n){var s=($(this).find(".sm3").html()*$(this).find("#sc_num").val()).toFixed(2);$(this).find(".sm5").html(s);var t=$(this).find(".sc_totalval");t.html(s);var a=$(".sp4_total"),c=e+parseInt(t.html());e=c,a.html(c)})}})});